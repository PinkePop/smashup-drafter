(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}})();const i=async n=>{const t=localStorage.getItem("lang"),e=n?t:t==="en"?"fr":"en";document.documentElement.setAttribute("lang",e),await u(e)},u=async n=>{localStorage.setItem("lang",n);const t=await g(n);m(t)},g=async n=>await(await fetch(`/locales/${n}.json`)).json(),f=(n,t={})=>n.replace(/\{(\w+)\}/g,(e,c)=>t[c]??""),m=n=>{document.querySelectorAll("[data-lang]").forEach(t=>{const e=t.getAttribute("data-lang");n[e]&&(t.textContent=f(n[e],{year:new Date().getFullYear()}))})};function d({modalId:n,openButtonId:t}){const e=document.getElementById(n),c=document.getElementById(t);if(!e||!c){console.warn(`Modal "${n}" or button "${t}" not found`);return}const o=()=>{e.open||e.showModal()},s=()=>{e.open&&e.close()};c.addEventListener("click",o),e.addEventListener("click",l=>{l.target.closest("[data-close]")&&s()}),e.addEventListener("click",l=>{const r=e.getBoundingClientRect();l.clientX>=r.left&&l.clientX<=r.right&&l.clientY>=r.top&&l.clientY<=r.bottom||s()});const a=e.querySelector("#save-settings");a&&a.addEventListener("click",async()=>{a.disabled=!0;try{s()}finally{a.disabled=!1}})}document.addEventListener("DOMContentLoaded",()=>{i(!0);const n=document.getElementById("year"),t=document.getElementById("lang-toggle-button");n.textContent=new Date().getFullYear(),t.addEventListener("click",()=>{i()}),d({modalId:"settings-modal",openButtonId:"settings-button"}),d({modalId:"settings-modal",openButtonId:"open-settings-link"})});
