(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const _=JSON.parse(`[{"id":1,"name":{"fr":"Set de Base","en":"Core Set"},"is_expansion":false,"release_date":{"fr":"2013-03-22","en":"2012-10-08"},"factions":[{"id":1,"name":{"fr":"Aliens","en":"Aliens"},"rating":{"fr":9,"en":10}},{"id":2,"name":{"fr":"Dinosaures","en":"Dinosaurs"},"rating":{"fr":4,"en":5}},{"id":3,"name":{"fr":"ninjas","en":"ninjas"},"rating":{"fr":9,"en":8}},{"id":4,"name":{"fr":"pirates","en":"pirates"},"rating":{"fr":5,"en":4}},{"id":5,"name":{"fr":"robots","en":"robots"},"rating":{"fr":9,"en":10}},{"id":6,"name":{"fr":"petits peuples","en":"tricksters"},"rating":{"fr":4,"en":1}},{"id":7,"name":{"fr":"sorciers","en":"wizards"},"rating":{"fr":8,"en":8}},{"id":8,"name":{"fr":"zombies","en":"zombies"},"rating":{"fr":7,"en":9}}]},{"id":2,"name":{"fr":"Même pas mort","en":"Awesome Level 9000"},"is_expansion":true,"release_date":{"fr":"2013-09-13","en":"2013-04-08"},"factions":[{"id":1,"name":{"fr":"Cavalerie Ours","en":"Bear Cavalry"},"rating":{"fr":4,"en":0}},{"id":2,"name":{"fr":"Fantômes","en":"Ghosts"},"rating":{"fr":8,"en":10}},{"id":3,"name":{"fr":"Plantes Carnivores","en":"Killer Plants"},"rating":{"fr":8,"en":9}},{"id":4,"name":{"fr":"Steampunks","en":"Steampunks"},"rating":{"fr":5,"en":4}}]},{"id":3,"name":{"fr":"Cthulhu Fhtagn","en":"The Obligatory Cthulhu"},"is_expansion":true,"release_date":{"fr":"2014-02-14","en":"2013-09-16"},"factions":[{"id":1,"name":{"fr":"Grands Anciens","en":"Elder Things"},"rating":{"fr":4,"en":1}},{"id":2,"name":{"fr":"Innsmouth","en":"Innsmouth"},"rating":{"fr":9,"en":9}},{"id":3,"name":{"fr":"Serviteurs de Cthulhu","en":"Minions of Cthulhu"},"rating":{"fr":9,"en":9}},{"id":4,"name":{"fr":"Université Miskatonic","en":"Miskatonic University"},"rating":{"fr":5,"en":1}}]},{"id":4,"name":{"fr":"Séries B","en":"Science Fiction Double Feature"},"is_expansion":true,"release_date":{"fr":"2014-10-17","en":"2014-03-17"},"factions":[{"id":1,"name":{"fr":"Singes Cyborgs","en":"Cyborg Apes"},"rating":{"fr":6,"en":4}},{"id":2,"name":{"fr":"Métamorphes","en":"Shapeshifters"},"rating":{"fr":6,"en":5}},{"id":3,"name":{"fr":"Super Espions","en":"Super Spies"},"rating":{"fr":2,"en":1}},{"id":4,"name":{"fr":"Voyageurs du Temps","en":"Time Travelers"},"rating":{"fr":8,"en":7}}]},{"id":5,"name":{"fr":"Trop Minions","en":"Pretty Pretty"},"is_expansion":true,"release_date":{"fr":"2015-10-13","en":"2015-03-09"},"factions":[{"id":1,"name":{"fr":"Chatons","en":"Kitty Cats"},"rating":{"fr":7,"en":4}},{"id":2,"name":{"fr":"Fées","en":"Fairies"},"rating":{"fr":7,"en":2}},{"id":3,"name":{"fr":"Princesses","en":"Princesses"},"rating":{"fr":7,"en":4}},{"id":4,"name":{"fr":"Poneys Magiques","en":"Mythic Horses"},"rating":{"fr":6,"en":3}}]},{"id":6,"name":{"fr":"Monstres sacrés","en":"Monster Smash"},"is_expansion":true,"release_date":{"fr":"2015-05-07","en":"2014-09-15"},"factions":[{"id":1,"name":{"fr":"Fourmis Géantes","en":"Giant Ants"},"rating":{"fr":3,"en":2}},{"id":2,"name":{"fr":"Vampires","en":"Vampires"},"rating":{"fr":2,"en":1}},{"id":3,"name":{"fr":"Savants Fous","en":"Mad Scientists"},"rating":{"fr":7,"en":8}},{"id":4,"name":{"fr":"Loups-Garous","en":"Werewolves"},"rating":{"fr":7,"en":9}}]},{"id":7,"name":{"fr":"Munchkin","en":"Munchkin"},"is_expansion":false,"release_date":{"fr":"2016-09-16","en":"2015-09-28"},"factions":[{"id":1,"name":{"fr":"Elfes","en":"Elves"},"rating":{"fr":7,"en":5}},{"id":2,"name":{"fr":"Guerriers","en":"Warriors"},"rating":{"fr":5,"en":2}},{"id":3,"name":{"fr":"Halfelins","en":"Halflings"},"rating":{"fr":7,"en":7}},{"id":4,"name":{"fr":"Magiciens","en":"Mages"},"rating":{"fr":6,"en":2}},{"id":5,"name":{"fr":"Nains","en":"Dwarves"},"rating":{"fr":6,"en":2}},{"id":6,"name":{"fr":"Orques","en":"Orcs"},"rating":{"fr":3,"en":0}},{"id":7,"name":{"fr":"Prêtres","en":"Clerics"},"rating":{"fr":3,"en":1}},{"id":8,"name":{"fr":"Voleurs","en":"Thieves"},"rating":{"fr":2,"en":0}}]},{"id":8,"name":{"fr":"Ressemblances fortuites","en":"Cease and Desist"},"is_expansion":true,"release_date":{"fr":"2017-07-07","en":"2016-09-15"},"factions":[{"id":1,"name":{"fr":"Voyageurs de l'Espace","en":"Star Roamers"},"rating":{"fr":5,"en":4}},{"id":2,"name":{"fr":"Squatteurs de Trône","en":"Ignobles"},"rating":{"fr":7,"en":5}},{"id":3,"name":{"fr":"Chevaliers des Etoiles","en":"Astroknights"},"rating":{"fr":7,"en":3}},{"id":4,"name":{"fr":"Changeformes","en":"Changebots"},"rating":{"fr":5,"en":3}}]},{"id":9,"name":{"fr":"Vous l’aurez voulu !","en":"It’s Your Fault!"},"is_expansion":true,"release_date":{"fr":"2017-01-27","en":"2016-03-07"},"factions":[{"id":1,"name":{"fr":"Requins","en":"Sharks"},"rating":{"fr":9,"en":7}},{"id":2,"name":{"fr":"Dragons","en":"Dragons"},"rating":{"fr":7,"en":7}},{"id":3,"name":{"fr":"Mythologies Grecques","en":"Mythic Greeks"},"rating":{"fr":6,"en":4}},{"id":4,"name":{"fr":"Super-Héros","en":"Superheroes"},"rating":{"fr":9,"en":9}},{"id":5,"name":{"fr":"Tornades","en":"Tornados"},"rating":{"fr":7,"en":8}}]},{"id":10,"name":{"fr":"Conflit de générations","en":"What Were We Thinking?"},"is_expansion":true,"release_date":{"fr":"2017-11-10","en":"2017-03-29"},"factions":[{"id":1,"name":{"fr":"Explorateurs","en":"Explorers"},"rating":{"fr":7,"en":5}},{"id":2,"name":{"fr":"Grands-Mères","en":"Grannies"},"rating":{"fr":8,"en":9}},{"id":3,"name":{"fr":"Rockstars","en":"Rockstars"},"rating":{"fr":10,"en":9}},{"id":4,"name":{"fr":"Oursons","en":"Teddy Bears"},"rating":{"fr":7,"en":5}}]},{"id":11,"name":{"fr":"Rois du Japon","en":"Big In Japan"},"is_expansion":true,"release_date":{"fr":"2018-06-15","en":"2017-09-06"},"factions":[{"id":1,"name":{"fr":"Monstrapoches","en":"Itty Critters"},"rating":{"fr":9,"en":6}},{"id":2,"name":{"fr":"Kaijù","en":"Kaiju"},"rating":{"fr":6,"en":5}},{"id":3,"name":{"fr":"Petites Magiciennes","en":"Magical Girls"},"rating":{"fr":5,"en":2}},{"id":4,"name":{"fr":"Super Combattants","en":"Mega Troopers"},"rating":{"fr":3,"en":1}}]},{"id":12,"name":{"fr":"Ces années-là","en":"That ’70s Expansion"},"is_expansion":true,"release_date":{"fr":"2024-11-22","en":"2023-08-18"},"factions":[{"id":1,"name":{"fr":"Danseurs Disco","en":"Disco Dancers"},"rating":{"fr":5,"en":3}},{"id":2,"name":{"fr":"Justiciers","en":"Vigilantes"},"rating":{"fr":6,"en":3}},{"id":3,"name":{"fr":"Maîtres Kung-Fu","en":"Kung Fu Fighters"},"rating":{"fr":8,"en":8}},{"id":4,"name":{"fr":"Routiers","en":"Truckers"},"rating":{"fr":7,"en":3}}]},{"id":13,"name":{"fr":"Vous en voulez encore ?","en":"Oops, You Did It Again"},"is_expansion":true,"release_date":{"fr":"2020-05-29","en":"2018-09-05"},"factions":[{"id":1,"name":{"fr":"Cowboys","en":"Cowboys"},"rating":{"fr":3,"en":2}},{"id":2,"name":{"fr":"Égypte Ancienne","en":"Ancient Egyptians"},"rating":{"fr":6,"en":3}},{"id":3,"name":{"fr":"Samouraïs","en":"Samurai"},"rating":{"fr":5,"en":3}},{"id":4,"name":{"fr":"Vikings","en":"Vikings"},"rating":{"fr":3,"en":2}}]},{"id":14,"name":{"fr":"Tournée mondiale : Incident diplomatique","en":"World Tour: International Incident"},"is_expansion":true,"release_date":{"fr":"2021-11-20","en":"2019-03-22"},"factions":[{"id":1,"name":{"fr":"Luchadors","en":"Luchadors"},"rating":{"fr":6,"en":3}},{"id":2,"name":{"fr":"Police Montée","en":"Mounties"},"rating":{"fr":4,"en":2}},{"id":3,"name":{"fr":"Mousquetaires","en":"Musketeers"},"rating":{"fr":8,"en":4}},{"id":4,"name":{"fr":"Sumos","en":"Sumo Wrestlers"},"rating":{"fr":8,"en":2}}]},{"id":15,"name":{"fr":"Tournée mondiale : Choc des cultures","en":"World Tour: Culture Shock"},"release_date":{"fr":"2022-06-10","en":"2019-09-06"},"is_expansion":true,"factions":[{"id":1,"name":{"fr":"Contes d'Anansi","en":"Anansi Tales"},"rating":{"fr":6,"en":4}},{"id":2,"name":{"fr":"Anciens Incas","en":"Ancient Incas"},"rating":{"fr":6,"en":6}},{"id":3,"name":{"fr":"Contes de Grimm","en":"Grimms’ Fairy Tales"},"rating":{"fr":8,"en":9}},{"id":4,"name":{"fr":"Voyageurs Polynésiens","en":"Polynesian Voyagers"},"rating":{"fr":5,"en":6}},{"id":5,"name":{"fr":"Contes Féeriques Russes","en":"Russian Fairy Tales"},"rating":{"fr":8,"en":5}}]},{"id":16,"name":{"fr":"Marvel","en":"Marvel"},"is_expansion":false,"release_date":{"fr":"2022-02-25","en":"2021-02-02"},"factions":[{"id":1,"name":{"fr":"Avengers","en":"Avengers"},"rating":{"fr":9,"en":8}},{"id":2,"name":{"fr":"Hydra","en":"Hydra"},"rating":{"fr":8,"en":7}},{"id":3,"name":{"fr":"Kree","en":"Kree"},"rating":{"fr":8,"en":6}},{"id":4,"name":{"fr":"Masters of Evil","en":"Masters of Evil"},"rating":{"fr":4,"en":1}},{"id":5,"name":{"fr":"S.H.I.E.L.D","en":"S.H.I.E.L.D"},"rating":{"fr":5,"en":1}},{"id":6,"name":{"fr":"Sinister Six","en":"Sinister Six"},"rating":{"fr":5,"en":2}},{"id":7,"name":{"fr":"Spider-Verse","en":"Spider-Verse"},"rating":{"fr":5,"en":1}},{"id":8,"name":{"fr":"Ultimates","en":"Ultimates"},"rating":{"fr":5,"en":4}}]},{"id":17,"name":{"fr":"Moutons","en":null},"is_expansion":true,"release_date":{"fr":"2022-08-26","en":null},"factions":[{"id":1,"name":{"fr":"Moutons","en":null},"rating":{"fr":5,"en":4}}]},{"id":18,"name":{"fr":"Pingouins","en":"Penguins"},"is_expansion":true,"release_date":{"fr":"2023-03-10","en":"2019-08-01"},"factions":[{"id":1,"name":{"fr":"Pingouins","en":"Penguins"},"rating":{"fr":5,"en":1}}]},{"id":19,"name":{"fr":"Geeks (Boîte)","en":"Geeks (from Geeky Box)"},"is_expansion":true,"release_date":{"fr":"2015-05-07","en":"2014-08-15"},"factions":[{"id":1,"name":{"fr":"Geeks","en":"Geeks"},"rating":{"fr":10,"en":10}}]},{"id":20,"name":{"fr":"Dream Team (Boîte)","en":"All Stars"},"is_expansion":true,"release_date":{"fr":"2020-11-20","en":"2017-06-12"},"factions":[{"id":1,"name":{"fr":"Dream Team","en":"Smash Up All Stars"},"rating":{"fr":9,"en":8}}]},{"id":21,"name":{"fr":"Fait son Cinéma","en":"Excellent Movies, Dudes!"},"is_expansion":true,"release_date":{"fr":"2024-11-22","en":"2023-08-18"},"factions":[{"id":1,"name":{"fr":"Hommes d'Action","en":"Action Heroes"},"rating":{"fr":null,"en":8}},{"id":2,"name":{"fr":"Retourneurs de Futur","en":"Backtimers"},"rating":{"fr":null,"en":8}},{"id":3,"name":{"fr":"Extramorphes","en":"Extramorphs"},"rating":{"fr":null,"en":5}},{"id":4,"name":{"fr":"Traqueurs de Spectres","en":"Wraithrustlers"},"rating":{"fr":null,"en":7}}]},{"id":22,"name":{"fr":"Edition Anniversaire","en":"10th Anniversary"},"is_expansion":true,"release_date":{"fr":"2025-08-29","en":"2022-10-28"},"factions":[{"id":1,"name":{"fr":"Sirènes","en":"Mermaids"},"rating":{"fr":8,"en":6}},{"id":2,"name":{"fr":"Squelettes","en":"Skeletons"},"rating":{"fr":8,"en":8}},{"id":3,"name":{"fr":"Champions du Monde","en":"World Champs"},"rating":{"fr":5,"en":3}}],"variants":{"fr":[{"id":1,"name":{"fr":"Gobelins","en":null},"rating":{"fr":5,"en":3}}],"en":[{"id":1,"name":{"fr":null,"en":"Sheep"},"rating":{"fr":5,"en":4}}]}},{"id":23,"name":{"fr":null,"en":"Knights of the Round Table"},"is_expansion":true,"release_date":{"fr":null,"en":"2021-09-17"},"factions":[{"id":1,"name":{"fr":null,"en":"Knights of the Round Table"},"rating":{"fr":8,"en":9}}]},{"id":24,"name":{"fr":null,"en":"Goblins"},"is_expansion":true,"release_date":{"fr":null,"en":"2021-05-10"},"factions":[{"id":1,"name":{"fr":null,"en":"Goblins"},"rating":{"fr":5,"en":3}}]},{"id":25,"name":{"fr":null,"en":"Disney Edition"},"is_expansion":false,"release_date":{"fr":null,"en":"2022-06-21"},"factions":[{"id":1,"name":{"fr":null,"en":"Aladdin"},"rating":{"fr":7,"en":5}},{"id":2,"name":{"fr":null,"en":"Beauty and the Beast"},"rating":{"fr":8,"en":6}},{"id":3,"name":{"fr":null,"en":"Big Hero 6"},"rating":{"fr":7,"en":6}},{"id":4,"name":{"fr":null,"en":"Frozen"},"rating":{"fr":10,"en":10}},{"id":5,"name":{"fr":null,"en":"Mulan"},"rating":{"fr":7,"en":6}},{"id":6,"name":{"fr":null,"en":"The Lion King"},"rating":{"fr":7,"en":9}},{"id":7,"name":{"fr":null,"en":"The Nightmare Before Christmas"},"rating":{"fr":6,"en":8}},{"id":8,"name":{"fr":null,"en":"Wreck-It Ralph"},"rating":{"fr":6,"en":6}}]},{"id":26,"name":{"fr":null,"en":"Teens"},"is_expansion":true,"release_date":{"fr":null,"en":"2023-08-25"},"factions":[{"id":1,"name":{"fr":null,"en":"Teens"},"rating":{"fr":null,"en":6}}]}]`),d={sets:_},y=()=>{const e=localStorage.getItem("lang")??"en",t=document.getElementById("sets-root");[...t.children].forEach(n=>{n.tagName.toLowerCase()!=="legend"&&n.remove()}),E(e).forEach(n=>{t.appendChild(v(n,e))})},S=()=>{const e=document.getElementsByName("sets"),t=JSON.parse(localStorage.getItem("ownedSets"))||[];e.forEach(n=>{n.checked=t.includes(n.id)})},b=()=>{const e=document.getElementsByName("sets"),t=[];e.forEach(n=>{n.checked&&t.push(n.id)}),localStorage.setItem("ownedSets",JSON.stringify(t))},v=(e,t)=>{const n=document.createElement("label"),r=document.createElement("input");return r.type="checkbox",r.id=e.id,r.name="sets",n.appendChild(r),n.append(e.name?.[t]),n},E=e=>{let t=Array.isArray(d.sets)?d.sets:[];return C(t,e)},u=(e,t)=>{const n=e?.release_date?.[t]??"",r=Date.parse(n);return Number.isFinite(r)?r:-1/0},C=(e,t)=>I(e,t).sort((n,r)=>u(n,t)-u(r,t)),I=(e,t)=>[...e].filter(n=>n.release_date?.[t]),M=async e=>{const t=localStorage.getItem("lang"),n=e?t:t==="en"?"fr":"en";document.documentElement.setAttribute("lang",n),await A(n),S()},A=async e=>{localStorage.setItem("lang",e);const t=await x(e);T(t)},x=async e=>await(await fetch(`/locales/${e}.json`)).json(),k=(e,t={})=>e.replace(/\{(\w+)\}/g,(n,r)=>t[r]??""),T=e=>{document.querySelectorAll("[data-lang]").forEach(t=>{const n=t.getAttribute("data-lang");e[n]&&(t.textContent=k(e[n],{year:new Date().getFullYear()}))})};function m({modalId:e,openButtonId:t}){const n=document.getElementById(e),r=document.getElementById(t);if(!n||!r){console.warn(`Modal "${e}" or button "${t}" not found`);return}const a=()=>{n.open||n.showModal()},i=()=>{n.open&&(S(),n.close())},s=()=>{n.open&&(b(),n.close())};r.addEventListener("click",a),n.addEventListener("click",f=>{f.target.closest("[data-close]")&&i()}),n.addEventListener("click",f=>{const l=n.getBoundingClientRect();f.clientX>=l.left&&f.clientX<=l.right&&f.clientY>=l.top&&f.clientY<=l.bottom||i()}),n.addEventListener("cancel",f=>{f.preventDefault(),i()});const o=n.querySelector("#save-settings");o&&o.addEventListener("click",async()=>{o.disabled=!0;try{s()}finally{o.disabled=!1}})}const c=e=>e.length?e.reduce((t,n)=>t+n,0)/e.length:0,w=(e,t=c(e))=>{if(!e.length)return 0;const n=e.reduce((r,a)=>r+(a-t)**2,0)/e.length;return Math.sqrt(n)},D=(e,t,n)=>!isFinite(n)||n===0?0:Math.abs((e-t)/n),L=e=>{const{fr:t,en:n}=e??{},r=[t,n].filter(a=>typeof a=="number");return r.length?r.reduce((a,i)=>a+i,0)/r.length:null};function P(e,t=[]){const n=Array.isArray(e?.sets)?e.sets:[],r=t,a=[];for(const i of n)if(r.includes(i.id))for(const s of i.factions||[]){const o=L(s.rating);o!=null&&a.push({id:`${i.id}:${s.id}`,name:s.name,rating:o})}return a}function B(e,t=Math.random){for(let n=e.length-1;n>0;n--){const r=Math.floor(t()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e}function F(e,t=Math.random){const n=Math.min(16,e.length),r=B([...e],t).slice(0,n);if(r.length<2)return{p1:null,p2:null,picks:r};const a=Math.ceil(r.length/2),i=r.slice(0,a),s=r.slice(a),o=f=>({imposed:f[0]??null,options:f.slice(1,8)});return{p1:o(i),p2:o(s),picks:r}}function G(e){return e<.5?"balanced":e<1?"partially_balanced":"unbalanced"}function g(e,t,n){if(!e?.imposed)return[];const r=e.imposed;return e.options.map(a=>{const i=c([r.rating,a.rating]),s=D(i,t,n);return{imposed:r,option:a,mean:Math.round(i*10)/10,z:Math.round(s*100)/100,tag:G(s)}})}function q(e,t){const n=e.map(o=>o.rating),r=Math.round(c(n)*10)/10,a=Math.round(w(n)*100)/100,i=t.p1?g(t.p1,r,a):[],s=t.p2?g(t.p2,r,a):[];return{mu:r,sigma:a,p1:i,p2:s}}function R(){try{return localStorage.getItem("ownedSets")??[]}catch{return[]}}function N({rng:e=Math.random,lang:t=localStorage.getItem("lang")??"en"}={}){const n=R(),r=P(d,n);if(r.length<2)return{error:"Not enough factions in pool",poolCount:r.length};const a=F(r,e),i=q(r,a);return{pool:r,draft:a,balance:i}}const O=()=>{M(!0),W(),V(),H(),y(),K()},V=()=>{const e=document.getElementById("year");e.textContent=new Date().getFullYear()},H=()=>{m({modalId:"settings-modal",openButtonId:"settings-button"}),m({modalId:"settings-modal",openButtonId:"open-settings-link"})},W=()=>{document.getElementById("lang-toggle-button").addEventListener("click",()=>{M(),y()})},K=()=>{document.getElementById("btn-draft")?.addEventListener("click",()=>{$()})},$=()=>{const e=localStorage.getItem("lang")??"en",t=N({lang:e});if(t?.error){console.warn(t.error);return}z(),h("#p1-pack",t.draft.p1,e),h("#p2-pack",t.draft.p2,e)},z=()=>{const e=document.getElementById("draft-area"),t=document.querySelector(".steps-section"),n=document.querySelector(".how-it-works");t?.setAttribute("hidden",""),n?.setAttribute("hidden",""),e?.removeAttribute("hidden")},p=(e,t)=>e?.[t]??e?.en??e?.fr??"(unknown)",h=(e,t,n)=>{const r=document.querySelector(e);if(!r||!t)return;const a=r.querySelector(".imposed"),i=r.querySelector(".options");t.imposed?a.innerHTML=`
      <p><strong>Imposed:</strong> ${p(t.imposed.name,n)} <small>(${t.imposed.rating})</small></p>
    `:a.textContent="No imposed faction.",i.innerHTML=(t.options||[]).map(s=>`
      <li>
        ${p(s.name,n)} <small>(${s.rating})</small>
      </li>
    `).join("")};document.addEventListener("DOMContentLoaded",()=>{O()});
